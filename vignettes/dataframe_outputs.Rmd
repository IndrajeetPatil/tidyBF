---
title: "Dataframe outputs"
author: "Indrajeet Patil"
date: "`r Sys.Date()`"
output:
  rmarkdown::html_vignette:
    fig_width: 6
    fig.align: 'center'
    fig.asp: 0.618
    dpi: 300
    toc: true
    toc_depth: 3
    warning: FALSE
    message: FALSE
vignette: >
  %\VignetteIndexEntry{Dataframe outputs}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
# show me all columns
options(tibble.width = Inf, pillar.bold = TRUE, pillar.subtle_num = TRUE)

knitr::opts_chunk$set(
  collapse = TRUE,
  dpi = 300,
  out.width = "100%",
  comment = "#>",
  warning = FALSE,
  message = FALSE
)
```

# Introduction

Although the primary focus of this package is to get expressions containing
statistical results, one can also use it to extract dataframes containing these
details. This vignette catalogs dataframe outputs from all functions.

A dataframe will typically contain the following columns:

  - *estimate*: estimated value of the posterior.

  - *conf.low*: lower bound for posterior estimate.

  - *conf.high*: upper bound for posterior estimate.
  
In addition to some other relevant columns that will depend on the test.

# One-sample tests

```{r}
# setup
library(tidyBF)

# for reproducibility
set.seed(123)
bf_ttest(
  data = ggplot2::msleep,
  x = brainwt,
  test.value = 0.275,
  bf.prior = 0.8,
  output = "dataframe"
)
```

# Two-sample tests

## within-subjects design

```{r}
# setup
library(tidyBF)

# data
df <- dplyr::filter(bugs_long, condition %in% c("LDLF", "LDHF"))

# for reproducibility
set.seed(123)
bf_ttest(
  data = df,
  x = condition,
  y = desire,
  paired = TRUE,
  subject.id = subject,
  output = "dataframe"
)
```

## between-subjects design

```{r}
# setup
library(tidyBF)

# for reproducibility
set.seed(123)
bf_ttest(
  data = ToothGrowth,
  x = supp,
  y = len,
  output = "dataframe"
)
```

# One-way ANOVAs

## within-subjects design

```{r}
if (utils::packageVersion("BayesFactor") >= package_version("0.9.12-4.3")) {
  # for reproducibility
  set.seed(123)
  bf_oneway_anova(
    data = bugs_long,
    x = condition,
    y = desire,
    paired = TRUE,
    subject.id = subject,
    output = "dataframe"
  )
}
```

## between-subjects design

```{r}
# setup
library(tidyBF)

set.seed(123)
bf_oneway_anova(
  data = iris,
  x = Species,
  y = Sepal.Length,
  output = "dataframe"
)
```

# Contingency table analyses

```{r}
# for reproducibility
set.seed(123)
library(tidyBF)

# ------------------------ association tests -----------------------------

# unpaired
set.seed(123)
bf_contingency_tab(
  data = mtcars,
  x = am,
  y = cyl,
  output = "dataframe"
)

# ------------------------ goodness of fit tests ---------------------------

# with counts
set.seed(123)
bf_contingency_tab(
  data = as.data.frame(HairEyeColor),
  x = Eye,
  counts = Freq,
  output = "dataframe"
)
```

# Correlation analyses

```{r}
# setup
library(tidyBF)

set.seed(123)
bf_corr_test(
  data = mtcars,
  x = wt,
  y = mpg,
  output = "dataframe"
)
```

# Meta-analysis

```{r}
# setup
set.seed(123)
library(tidyBF)

# creating a dataframe
df <-
  structure(
    .Data = list(
      study = c("1", "2", "3", "4", "5"),
      estimate = c(
        0.382047603321706,
        0.780783111514665,
        0.425607573765058,
        0.558365541235078,
        0.956473848429961
      ),
      std.error = c(
        0.0465576338644502,
        0.0330218199731529,
        0.0362834986178494,
        0.0480571500648261,
        0.062215818388157
      )
    ),
    row.names = c(NA, -5L),
    class = c("tbl_df", "tbl", "data.frame")
  )

set.seed(123)
bf_meta_random(data = df, output = "dataframe")
```
